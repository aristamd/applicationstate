!function(e){var t={};function r(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)r.d(n,s,function(t){return e[t]}.bind(null,s));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";r.r(t);class n{static get(e){return e=n._dereferencePath(e),n._resolvePath(e)}static getOrSet(e,t,r){const s=n.get(e);return void 0!==s?s:(n.set(e,t,r),n.get(e))}static listen(e,t){return n._listeners[e]||(n._listeners[e]=[]),n._listenerKey++,t._listenerKey=n._listenerKey,n._listeners[e].push(t),t._listenerKey}static removeListener(e,t){n._listeners[e]&&n._listeners.forEach((e,r)=>{e._listenerKey==t&&n._listeners.splice(r,1)})}static set(e,t,r){e=n._dereferencePath(e);if(r=Object.assign({notify:!0,exclude_notification_paths:[],exclude_notification_listeners:[],immutable:!1,persist:!0,save_previous:!0},r),n._options[e]=r,!n._previousState[e]&&r.save_previous&&(n._previousState[e]=[]),r.save_previous){let t=n._resolvePath(e);void 0!==t&&n._previousState[e].push(t)}n._assignValue(e,t),n.notify(e,!1,r)}static _assignValue(e,t,r){r=r||n._state;const s=n.walk(e);for(let e=0;e<s.length;e++){const n=s[e];switch(n.type){case"object":void 0===r[n.name]&&(r[n.name]={}),r=r[n.name];break;case"array":void 0===r[n.name]&&(r[n.name]=[]),r=r[n.name];break;case"leaf":return r[n.name]=t}}throw Error("We should have returned after setting the value.")}static ln(e,t){n._symlinks||(n._symlinks={}),n._reverse_symlinks||(n._reverse_symlinks={}),e=n._dereferencePath(e);let r=t.split("."),s=r.slice(-1);t=n._dereferencePath(r.slice(0,-1).join("."))+"."+s,n._symlinks[t]=e,n._reverse_symlinks[e]||(n._reverse_symlinks[e]=[]),n._reverse_symlinks[e].push(t)}static rm(e,t){t=t||n._state;let r=e;if("app"===e)return;if(!e)return;function s(e,t){let r=n._symlinks[e];if(delete n._symlinks[e],!t){let t=n._reverse_symlinks[r];t.splice(t.indexOf(e),1)}}if(function(e){return!(!n._symlinks||!n._symlinks[e])}(e=n._materializePath(e)))return s(e);(function(e){return!(!n._reverse_symlinks||!n._reverse_symlinks[e])})(e)&&(n._reverse_symlinks[e].forEach(t=>{s(e,!0)}),delete n._reverse_symlinks[e]);let i=e.split("."),a=i.slice(-1)[0];i=i.slice(0,-1);for(let r=0;r<i.length;r++)if(void 0===(t=t[i[r]]))throw new Error("Undefined target in ApplicationState.rm: "+e);delete t[a];let l=n._options[r];l||(l={notify:!0,exclude_notification_paths:[],exclude_notification_listeners:[],immutable:!1,persist:!0,save_previous:!0}),n.notify(r,!1,l)}static _dereferencePath(e){if(!n._symlinks)return e;const t=n.walk(e);for(let r=0;r<t.length;r++){const s=t[r];if(n._symlinks[s.path])return e=e.replace(s.path,n._symlinks[s.path]),n._dereferencePath(e)}return e}static _reverseSymlink(e){if(e.indexOf(".")<0)return[];let t=[],r=[];function s(e){let t=e.split("."),s=t.slice(-1),i=t.slice(0,-1).join(".");n._reverseSymlink(i).forEach(e=>{r.push(e+"."+s)})}return n._reverse_symlinks[e]&&(t=n._reverse_symlinks[e]),t.forEach(e=>{s(e)}),s(e),t.concat(r)}static _materializePath(e){let t=e.split("."),r=t.slice(-1);return n._dereferencePath(t.slice(0,-1).join("."))+"."+r}static _resolvePath(e,t){if("string"!=typeof e)throw Error("is");t=t||n._state;const r=n.walk(e);for(let e=0;e<r.length;e++){if(void 0===(t=t[r[e].name]))return;if(null===t)return null}return t}static notify(e,t,r){function s(e,t,s){if(!r.exclude_notification_listeners.includes(e._listenerKey)){if(t=n._dereferencePath(t),n._previousState[t])return e(n._resolvePath(t),n._previousState[t][n._previousState[t].length-1],s);e(n._resolvePath(t),void 0,s)}}function i(e){if(!n._symlinks)return;n._reverseSymlink(e).forEach(e=>{n._listeners[e]&&(r.exclude_notification_paths.includes(e)||n._listeners[e].forEach(t=>{s(t,e)}))})}n._disable_notification||(t||function(e){const t=n.walk(e);for(let a=0;a<t.length;a++){const l=t[a];"leaf"!==l.type&&(i(l.path),r.exclude_notification_paths.includes(l.path)||n._listeners[l.path]&&n._listeners[l.path].forEach(t=>s(t,l.path,e)))}}(e),function(e){i(e),n._listeners[e]&&(r.exclude_notification_paths.includes(e)||n._listeners[e].forEach(t=>s(t,e)))}(e),t||function e(t){const a=n._resolvePath(t);if(a&&"object"==typeof a)if(Array.isArray(a)){const l=a.length;for(let a=0;a<l;a++){const l=t+"["+a+"]";if(i(l),r.exclude_notification_paths.includes(l))return e(l);n._listeners[l]&&n._listeners[l].forEach(e=>s(e,l,t)),e(l)}}else Object.keys(a).forEach(a=>{const l=t+"."+a;if(i(l),r.exclude_notification_paths.includes(l))return e(l);n._listeners[l]&&n._listeners[l].forEach(e=>s(e,l,t)),e(l)})}(e))}static undo(e){if(e.indexOf(".")<0)return n._previousState[e]?void(n._state[e]=n._previousState[e].pop()):n._state[e]=void 0;var t=e.split(".");for(let r=t.length;r>0;r--)if(e=t.slice(0,r).join("."),n._state[e]){if(!n._previousState[e])return n._state[e]=void 0;n._state[e]=n._previousState[e].pop()}}static disable_notfication(){n._disable_notification=!0}static enable_notification(){n._disable_notification=!1}static flatten(e,t,r){r||(r=[]),t||(t="");let n=Object.keys(e),s=Array.isArray(e);for(let i=0;i<n.length;i++){let a,l=e[n[i]];a=s?t+(t?"["+n[i]+"]":""):t+(t?".":"")+n[i],l&&"object"==typeof l?this.flatten(l,a,r):((l=JSON.stringify(l))||(l=JSON.stringify(null)),r.push({key:a,value:l}))}return r}static walk(e){let t,r,n,s,i,a,l=0;const o=[];if("["===e[0])throw Error("Root node cannot be an array");const _=(e,t,r)=>{let n;return t?n="array"===r?t.replace("["+e+"]",""):t.replace("."+e,""):""};for(t=0;t<e.length;t++)if(l!==t)if("."!==e[l]&&"["!==e[l]&&"]"!==e[l]||l++,"."!==e[t])if("["!==e[t]){if("]"===e[t]){if(r=e.substring(l,t),n=e.substring(0,t+1),t+1===e.length)return o.push({name:parseInt(r),path:n,parent:i,parent_path:_(r,n,a),parent_type:a,type:"leaf"}),i=r,o;s="["===e[t+1]?"array":"object",o.push({name:parseInt(r),path:n,parent:i,parent_path:_(r,n,a),parent_type:a,type:s}),i=r,a=s,l=t+1}}else r=e.substring(l,t),n=e.substring(0,t),l=t+1,s="array",o.push({name:r,path:n,parent:i,parent_path:_(r,n,a),parent_type:a,type:s}),i=r,a=s;else r=e.substring(l,t),n=e.substring(0,t),l=t+1,s="object",o.push({name:r,path:n,parent:i,parent_path:_(r,n,a),parent_type:a,type:s}),i=r,a=s;return l===t+1?o:(o.push({name:e.substring(l),path:e,parent:i,parent_path:_(e,n,a),parent_type:a,type:"leaf"}),o)}}n._previousState={},n._state={},n._listeners=[],n._listenerKey=0,n._options={},t.default=n}]);